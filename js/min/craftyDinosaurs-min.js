$(document).ready(function(){function e(t,a){a=a!==!1;var s={api_key:"q0r7ycz3zozftljmhx1yag8b",terms:t+", dinosaur",itemsPerpage:"6",pageNumber:h,etsyURL:"https://openapi.etsy.com/v2/listings/active.js?keywords="};v=t,$.ajax({url:s.etsyURL+s.terms+"&limit="+s.itemsPerpage+"&includes=Images:1&api_key="+s.api_key+"&page="+s.pageNumber,dataType:"jsonp",success:function(i){var u=i.count;g=Math.ceil(u/s.itemsPerpage),h>g&&(h=g,e(t,!1)),u>0?(o(i.results),$("#canvas").removeClass("flip"),$(".searchAndResults").css({transform:"translateX(-145%)"}),a&&history.pushState(h,"Page"+h,"#/"+encodeURIComponent(t)+"/"+encodeURIComponent(h)),f(h),m(g),d(g),c(t),l(g),D=!0,C=!0):r(n(t))},type:"GET"})}function t(e){var t=e.Images[0].url_170x135,a=e.title,n=e.url,s=e.price,r=e.currency_code,o='<div class="itemCell"><div class="itemHolder"><div class="image"><a href="'+n+'" target="_blank"><img src="'+t+'" alt="image of item"></a></div><div class="itemInfo"><h3><a href="'+n+'" target="_blank">'+a+'</a></h3><p class="cost">$'+s+" ("+r+")</p></div></div></div>";return o}function a(){$.ajax({url:"http://api.wordnik.com:80/v4/words.json/randomWords?hasDictionaryDef=false&includePartOfSpeech=noun&minCorpusCount=85000&maxCorpusCount=-1&minDictionaryCount=10&maxDictionaryCount=-1&minLength=3&maxLength=-1&limit=1&api_key=a6b702e895e72a81b452252cd67769286a06070437a481301",type:"GET",dataType:"jsonp",success:function(e){var t=e[0].word;$("#customSearch").val(t)}})}function n(e){var t="<p>No one is making any crafts that are combine <em>dinosaurs</em> with <em>"+e+'</em>. This might be a good market for you to start!</p><p><a href="#">In the meantime you can still <span>look for other dino-products</span></a></p>';return t}function s(e){var t="<p>Sorry we can't do a search from the search box AND do a search from the buttons. Please delete <em>"+e+"</em> as your search term before pressing <em>"+SearchTerm+"</em>  or press the submit button to use <em>"+e+"</em></p>";return t}function r(e){$(".noResponseContainer").fadeIn("400",function(){$(".noResponseMessage").append(e),$(".noResponseMessage").css("top","70px")})}function o(e){$(".output.new").removeClass("new").addClass("current");var a=$('<div class="output new"></div>');$.each(e,function(e,n){var s=t(n);a.append(s)}),$(".resultsArea").append(a)}function i(e){var t="<em>Dinosaurs</em> + <em>"+e+"</em>! What a great combo!";return $("h1.resultsHeader").html(""),t}function c(e){var t=i(e);$("h1.resultsHeader").append(t)}function l(e){var t=u(e);$("h2.resultsSubHeaders").append(t)}function u(e){var t="(page <em>"+h+"</em> of <em>"+e+"</em>)";return $("h2.resultsSubHeaders").html(""),t}function p(){$("#canvas").addClass("flip"),$("#customSearch").val(""),$(".searchAndResults").css({transform:"translateX(0%)"}),$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){$("div.resultsArea").html(""),$(".resultsArea").css({transform:"translateX(0%)"})},1e4),h=1,v="",g="",y="",w="",b="",history.pushState("Welcome","Welcome","index.html")}function m(e){e>1?($("li.next").css("display","inline-block"),$(".rightArrow").css("display","block")):($("li.next").css("display","none"),$(".rightArrow").css("display","none")),e===h?($("li.next").css("display","none"),$(".rightArrow").css("display","none")):($("li.next").css("display","inline-block"),$(".rightArrow").css("display","block"))}function d(e){e>1&&h>1?($("li.prev").css("display","inline-block"),$(".leftArrow").css("display","block")):($("li.prev").css("display","none"),$(".leftArrow").css("display","none"))}function f(){if("forward"===y)$(".output.new").addClass("preResult"),$(".output.current").animate({marginLeft:"-100%"},2e3,"linear",function(){$(".output.current").remove()});else if("backward"===y){var e=$(".output.new");e.parent().prepend(e),e.css("margin-left","-100%"),e.animate({marginLeft:"0%"},2e3,"linear",function(){$(".output.current").remove()})}}var h=1,v="",g,y="",w="",b=0,k="",D=!0,C=!0;window.onpopstate=function(t){console.log("location: ",document.location,", state: ",t);var a=document.location.hash.split("/")[2],n=document.location.hash.split("/")[1];""===location.hash?(p(),k="onHomePage"):"onHomePage"===k&&""!==n?(console.log(n),k="",e(n)):(y=h>a?"backward":"forward",h=a,e(n,!1))},$("li.searchButton").click(function(t){if($("#customSearch").val()){t.preventDefault(),SearchTerm=$(this).attr("id");var a=s($("#customSearch").val());r(a)}else{t.preventDefault?t.preventDefault():t.returnValue=!1;var n=$(this).attr("id");e(n)}}),$("#dinoForm").submit(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var a=$("#customSearch").val();e(a)}),$("#dinoRandom").click(function(){a()}),$(".noResponseContainer").click(function(){$(".noResponseMessage").css("top","-200px"),$(".noResponseContainer").fadeOut("400"),$(".noResponseMessage").html(""),$("#customSearch").val("")}),$(".noResponseContainer a").click(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}),$("a.restart").click(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,p()}),$("li.next a, .rightArrow").click(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,D===!0&&(D=!1,++h,y="forward",e(v))}),$("li.prev a, .leftArrow").click(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,C===!0&&(C=!1,--h,y="backward",e(v))});var x=document.location.hash;if(/^#\/.+\//.test(x)){var R=document.location.hash.split("/")[1],A=document.location.hash.split("/")[2];y="forward",h=A,e(R)}});